from utils import Utils
import cv2

img = cv2.imread('../images/scores/happy-birthday.jpg')

rects = [[(665, -65), (672, -70)], [(709, -65), (730, -99)], [(732, -65), (755, -100)], [(489, -66), (499, -99)], [(500, -66), (520, -99)], [(633, -66), (643, -99)], [(646, -66), (660, -99)], [(694, -71), (707, -100)], [(523, -76), (543, -100)], [(546, -76), (569, -110)], [(570, -76), (593, -110)], [(594, -76), (616, -110)], [(665, -76), (673, -99)], [(677, -76), (693, -99)], [(757, -76), (778, -100)], [(778, -76), (801, -110)], [(71, -213), (100, -288)], [(103, -215), (116, -246)], [(764, -221), (781, -262)], [(1160, -225), (1177, -268)], [(383, -226), (400, -268)], [(842, -226), (859, -268)], [(120, -229), (137, -273)], [(459, -229), (478, -273)], [(629, -229), (635, -273)], [(816, -229), (822, -273)], [(1010, -229), (1016, -273)], [(1219, -229), (1224, -273)], [(248, -230), (254, -273)], [(435, -230), (441, -273)], [(278, -235), (295, -278)], [(659, -235), (676, -278)], [(1039, -235), (1057, -277)], [(167, -240), (225, -283)], [(330, -240), (348, -283)], [(549, -240), (607, -283)], [(712, -240), (729, -283)], [(931, -240), (988, -283)], [(1099, -245), (1117, -285)], [(71, -411), (100, -486)], [(102, -413), (116, -444)], [(774, -420), (791, -460)], [(661, -423), (678, -466)], [(912, -423), (929, -466)], [(142, -427), (160, -471)], [(518, -427), (524, -471)], [(886, -427), (892, -471)], [(1209, -427), (1224, -471)], [(259, -433), (276, -476)], [(1095, -433), (1108, -462)], [(373, -437), (463, -475)], [(547, -443), (565, -482)]]
print('rects - before')
print(rects)


def convert_coordinate(rect):
    left, top, right, bottom = Utils.get_rect_coordinates(rect)
    restored_p1 = (left, -top)
    restored_p2 = (right, -bottom)
    return [restored_p1, restored_p2]

rects_after_convert = list(map(convert_coordinate, rects))

print('rects - after convert')
print(rects_after_convert)


def rectangles_sort_key(rect):
    left, top, right, bottom = Utils.get_rect_coordinates(rect)
    return left + top * top


rects_sorted = sorted(rects_after_convert, key=rectangles_sort_key)
print('rects - sorted')
print(rects_sorted)
